{"ast":null,"code":"import ImageCover from \"@/components/ImageCover.vue\";\nimport Swal from \"sweetalert2\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    ImageCover\n  },\n  data() {\n    return {\n      auth: null,\n      items: null,\n      c_id: null,\n      selectedDate: \"\",\n      rangeItems: [],\n      reserveItems: [],\n      dialogOpen: false,\n      dataReserve: {},\n      gunItems: [],\n      selectGuns: [],\n      roomData: []\n    };\n  },\n  watch: {\n    selectedDate: async function (data) {\n      this.selectedDate = data;\n      await this.getReserve();\n      await this.getAllRange();\n    }\n  },\n  created() {\n    this.auth = JSON.parse(localStorage.getItem(\"auth\"));\n    this.isAdmin = this.auth.user.role === \"admin\";\n    const currentDate = new Date();\n    const year = currentDate.getFullYear();\n    const month = String(currentDate.getMonth() + 1).padStart(2, \"0\"); // Adding 1 because months are 0-indexed\n    const day = String(currentDate.getDate()).padStart(2, \"0\");\n    const formattedDate = `${year}-${month}-${day}`;\n    this.selectedDate = formattedDate;\n    this.c_id = JSON.parse(localStorage.getItem(\"auth\"))?.c_id;\n    this.getReserve();\n    this.getAllRange();\n    this.getGuns();\n  },\n  methods: {\n    async filterReserveItemsByTime(reserveItems, shootingRange, time) {\n      return new Promise((resolve, reject) => {\n        try {\n          const filteredReservations = reserveItems.filter((t, i) => {\n            return t.shootingRange.s_id === shootingRange.s_id && t.r_time_reserve === time;\n          });\n          resolve(filteredReservations);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    async getAllRange() {\n      try {\n        const response = await this.axios.get(\n        // Note the use of this.$axios\n        process.env.VUE_APP_API_SERVER + `/shootingranges`);\n        if (response.status === 200) {\n          this.rangeItems = response.data;\n          this.roomData = await Promise.all(this.rangeItems.map(async (item, index) => {\n            const time_01 = await this.filterReserveItemsByTime(this.reserveItems, item, \"10:00 - 11:00\");\n            const time_02 = await this.filterReserveItemsByTime(this.reserveItems, item, \"11:00 - 12:00\");\n            const time_03 = await this.filterReserveItemsByTime(this.reserveItems, item, \"12:00 - 13:00\");\n            const time_04 = await this.filterReserveItemsByTime(this.reserveItems, item, \"13:00 - 14:00\");\n            const time_05 = await this.filterReserveItemsByTime(this.reserveItems, item, \"14:00 - 15:00\");\n            const time_06 = await this.filterReserveItemsByTime(this.reserveItems, item, \"15:00 - 16:00\");\n            const time_07 = await this.filterReserveItemsByTime(this.reserveItems, item, \"16:00 - 17:00\");\n            const time_08 = await this.filterReserveItemsByTime(this.reserveItems, item, \"17:00 - 18:00\");\n            const time_09 = await this.filterReserveItemsByTime(this.reserveItems, item, \"18:00 - 19:00\");\n            const time_10 = await this.filterReserveItemsByTime(this.reserveItems, item, \"19:00 - 20:00\");\n            // Add similar lines for other time slots\n\n            return {\n              range: item.s_name,\n              range_id: item.s_id,\n              time_01: time_01.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_02: time_02.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_03: time_03.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_04: time_04.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_05: time_05.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_06: time_06.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_07: time_07.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_08: time_08.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_09: time_09.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              time_10: time_10.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n              timeD_01: \"10:00 - 11:00\",\n              timeD_02: \"11:00 - 12:00\",\n              timeD_03: \"12:00 - 13:00\",\n              timeD_04: \"13:00 - 14:00\",\n              timeD_05: \"14:00 - 15:00\",\n              timeD_06: \"15:00 - 16:00\",\n              timeD_07: \"16:00 - 17:00\",\n              timeD_08: \"17:00 - 18:00\",\n              timeD_09: \"18:00 - 19:00\",\n              timeD_10: \"19:00 - 20:00\"\n            };\n          }));\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    getColor(value) {\n      return value === \"ว่าง\" ? \"green\" : \"red\";\n    },\n    async getReserve() {\n      try {\n        const response = await this.axios.get(process.env.VUE_APP_API_SERVER + \"/reserves\");\n        if (response.status === 200) {\n          const filteredReservations = await this.filterReservationsByDate(response.data, this.selectedDate);\n          this.reserveItems = filteredReservations;\n        }\n\n        // this.reserveItems = data;\n        // console.log(\"reserveItems\", this.reserveItems);\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    filterReservationsByDate(data, selectedDate) {\n      return new Promise((resolve, reject) => {\n        try {\n          const filteredReservations = data.filter(item => {\n            return item.r_date_reserve === selectedDate;\n          });\n          resolve(filteredReservations);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    async getGuns() {\n      try {\n        const response = await this.axios.get(process.env.VUE_APP_API_SERVER + \"/guns\");\n        if (response.status === 200) {\n          this.gunItems = response.data;\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async reserveRange() {\n      try {\n        // this.dataReserve.guns = this.selectGuns.map((item) => ({ g_id: item }));\n        this.dataReserve.guns = this.selectGuns;\n\n        // console.log(\"save\", this.dataReserve);\n\n        const response = await this.axios.post(process.env.VUE_APP_API_SERVER + \"/reserve\", {\n          ...this.dataReserve\n        });\n        if (response.status === 201) {\n          this.dialogOpen = false;\n          Swal.fire({\n            title: \"จองสนามสำเร็จ!\",\n            // text: \"คุณสมัครสมาชิกสำเร็จ\",\n            icon: \"success\",\n            confirmButtonText: \"ตกลง\"\n            // timer: 1000,\n          }).then(() => {\n            window.location.href = \"/reservedata\";\n          });\n        }\n      } catch (err) {\n        Swal.fire({\n          title: \"เกิดข้อผิดพลาด!\",\n          // text: \"คุณสมัครสมาชิกสำเร็จ\",\n          icon: \"error\",\n          confirmButtonText: \"ตกลง\",\n          timer: 1500\n        });\n        console.error(err);\n      }\n    },\n    async openDialogCard(s_id, s_name, r_time_reserve) {\n      if (this.isAdmin) return;\n      if (await this.getDetail()) return;\n      this.dataReserve = {\n        range: s_name,\n        r_date_reserve: this.selectedDate,\n        r_time_reserve: r_time_reserve,\n        customer: {\n          c_id: this.c_id\n        },\n        shootingRange: {\n          s_id: s_id\n        },\n        guns: []\n      };\n      this.dialogOpen = true;\n      // console.log(this.dataReserve);\n    },\n\n    closeDialogCard() {\n      // Reset the editedUser and close the dialog\n      this.dataReserve = {};\n      this.dataReserve.guns = [];\n      this.dialogOpen = false;\n    },\n    async getDetail() {\n      try {\n        const response = await this.axios.get(process.env.VUE_APP_API_SERVER + `/reserves`);\n        if (response.status === 200) {\n          this.items = response.data.filter(item => item.customer.c_id === this.c_id);\n          console.log(\"this.items\", this.items);\n          if (this.items.length > 0) {\n            Swal.fire({\n              title: \"คุณมีสนามที่จองอยู่แล้ว!\",\n              text: \"คุณสามารถจองได้ 1 สนามต่อครั้ง\",\n              icon: \"warning\",\n              confirmButtonText: \"ดูข้อมูล\",\n              showCancelButton: true,\n              cancelButtonText: \"ปิด\"\n              // timer: 1000,\n            }).then(result => {\n              if (result.isConfirmed) {\n                window.location.href = \"/reservedata\";\n              }\n            });\n            return true;\n          } else if (this.items.length === 0) {\n            return false;\n          }\n        }\n      } catch (error) {\n        console.error(\"Registration error:\", error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["ImageCover","Swal","name","components","data","auth","items","c_id","selectedDate","rangeItems","reserveItems","dialogOpen","dataReserve","gunItems","selectGuns","roomData","watch","getReserve","getAllRange","created","JSON","parse","localStorage","getItem","isAdmin","user","role","currentDate","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","formattedDate","getGuns","methods","filterReserveItemsByTime","shootingRange","time","Promise","resolve","reject","filteredReservations","filter","t","i","s_id","r_time_reserve","error","response","axios","get","process","env","VUE_APP_API_SERVER","status","all","map","item","index","time_01","time_02","time_03","time_04","time_05","time_06","time_07","time_08","time_09","time_10","range","s_name","range_id","length","timeD_01","timeD_02","timeD_03","timeD_04","timeD_05","timeD_06","timeD_07","timeD_08","timeD_09","timeD_10","err","console","getColor","value","filterReservationsByDate","r_date_reserve","reserveRange","guns","post","fire","title","icon","confirmButtonText","then","window","location","href","timer","openDialogCard","getDetail","customer","closeDialogCard","log","text","showCancelButton","cancelButtonText","result","isConfirmed"],"sources":["src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div>\n    <ImageCover />\n    <div\n      v-if=\"auth\"\n      style=\"\n        padding: 100px;\n        padding-top: 30px;\n        display: flex;\n        justify-content: center;\n        flex-direction: column;\n      \"\n    >\n      <h1>ตารางการจองสนามยิงปืน</h1>\n      <div style=\"padding: 20px; padding-left: 0px\">\n        <label for=\"date\">เลือกวันที่: </label>\n        <input type=\"date\" id=\"date\" name=\"date\" v-model=\"selectedDate\" />\n      </div>\n\n      <!-- <p>Selected Date: {{ selectedDate }}</p> -->\n      <template>\n        <v-table fixed-header height=\"100px\">\n          <thead>\n            <tr>\n              <th class=\"text-left\">ชื่อสนาม/เวลา</th>\n              <th class=\"text-left\">08:00 - 09:00</th>\n              <th class=\"text-left\">11:00 - 12:00</th>\n              <th class=\"text-left\">12:00 - 13:00</th>\n              <th class=\"text-left\">13:00 - 14:00</th>\n              <th class=\"text-left\">14:00 - 15:00</th>\n              <th class=\"text-left\">15:00 - 16:00</th>\n              <th class=\"text-left\">16:00 - 17:00</th>\n              <th class=\"text-left\">17:00 - 18:00</th>\n              <th class=\"text-left\">18:00 - 19:00</th>\n              <th class=\"text-left\">19:00 - 20:00</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in roomData\" :key=\"index\">\n              <td>{{ item.range }}</td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_01)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_01 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_01)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_01 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_02)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_02 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_02)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_02 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_03)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_03 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_03)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_03 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_04)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_04 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_04)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_04 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_05)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_05 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_05)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_05 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_06)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_06 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_06)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_06 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_07)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_07 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_07)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_07 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_08)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_08 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_08)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_08 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_09)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_09 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_09)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_09 }}\n                  </div>\n                </v-chip>\n              </td>\n              <td>\n                <v-chip\n                  @click=\"\n                    openDialogCard(item.range_id, item.range, item.timeD_10)\n                  \"\n                  class=\"select\"\n                  :disabled=\"item.time_10 === 'ไม่ว่าง'\"\n                  label\n                  :color=\"getColor(item.time_10)\"\n                  style=\"display: flex; justify-content: center; align-items; center; width: 100px;\"\n                >\n                  <div style=\"text-align: center\">\n                    {{ item.time_10 }}\n                  </div>\n                </v-chip>\n              </td>\n            </tr>\n          </tbody>\n        </v-table>\n      </template>\n    </div>\n    <div\n      v-else\n      style=\"\n        padding: 50px;\n        /* padding-top: 30px; */\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        flex-direction: column;\n      \"\n    >\n    <v-card style=\"padding: 50px;\">\n      <h2>** กรุณาเข้าสู่ระบบเพื่อทำการจองสนาม **</h2>\n      <v-btn color=\"primary\" style=\"margin-top: 20px;\" @click=\"$router.push('/login')\">เข้าสู่ระบบ</v-btn>\n\n    </v-card>\n    </div>\n    <v-dialog v-model=\"dialogOpen\" max-width=\"600px\">\n      <v-card>\n        <v-card-title><h3>ข้อมูลการจอง</h3></v-card-title>\n        <v-container style=\"padding: 25px; padding-top: 0\">\n          <div style=\"display: flex; flex-direction: row\">\n            <span style=\"font-weight: bold\">สนาม:&nbsp;</span>\n            <span>{{ dataReserve.range }}</span>\n          </div>\n          <div style=\"display: flex; flex-direction: row\">\n            <span style=\"font-weight: bold\">วันที่จอง:&nbsp;</span>\n            <span>{{ dataReserve.r_date_reserve }}</span>\n          </div>\n          <div style=\"display: flex; flex-direction: row\">\n            <span style=\"font-weight: bold\">เวลาที่จอง:&nbsp;</span>\n            <span>{{ dataReserve.r_time_reserve }}</span>\n          </div>\n\n          <v-select\n            v-model=\"selectGuns\"\n            :items=\"gunItems\"\n            label=\"เลือกปืน\"\n            item-value=\"g_name\"\n            item-text=\"g_name\"\n            multiple\n          >\n            <template v-slot:selection=\"{ item, index }\">\n              <v-chip v-if=\"index < 4\">\n                <span>{{ item.g_name }}</span>\n              </v-chip>\n              <span\n                v-if=\"index === 3 && selectGuns.length > 4\"\n                class=\"text-grey text-caption align-self-center\"\n              >\n                (+{{ selectGuns.length - 4 }} others)\n              </span>\n            </template>\n          </v-select>\n          <div\n            style=\"\n              display: flex;\n              justify-content: flex-end;\n              align-items: center;\n              margin-top: 10px;\n            \"\n          >\n            <v-btn color=\"primary\" @click=\"reserveRange()\">ยืนยันการจอง</v-btn>\n            <v-btn style=\"margin-left: 10px\" @click=\"closeDialogCard\"\n              >ยกเลิก</v-btn\n            >\n          </div>\n        </v-container>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport ImageCover from \"@/components/ImageCover.vue\";\nimport Swal from \"sweetalert2\";\n\nexport default {\n  name: \"HomeView\",\n  components: {\n    ImageCover,\n  },\n  data() {\n    return {\n      auth: null,\n      items: null,\n      c_id: null,\n      selectedDate: \"\",\n      rangeItems: [],\n      reserveItems: [],\n      dialogOpen: false,\n      dataReserve: {},\n      gunItems: [],\n      selectGuns: [],\n      roomData: [],\n    };\n  },\n  watch: {\n    selectedDate: async function (data) {\n      this.selectedDate = data;\n      await this.getReserve();\n      await this.getAllRange();\n    },\n  },\n\n  created() {\n    this.auth = JSON.parse(localStorage.getItem(\"auth\"));\n    this.isAdmin = this.auth.user.role === \"admin\";\n    const currentDate = new Date();\n    const year = currentDate.getFullYear();\n    const month = String(currentDate.getMonth() + 1).padStart(2, \"0\"); // Adding 1 because months are 0-indexed\n    const day = String(currentDate.getDate()).padStart(2, \"0\");\n\n    const formattedDate = `${year}-${month}-${day}`;\n    this.selectedDate = formattedDate;\n\n    this.c_id = JSON.parse(localStorage.getItem(\"auth\"))?.c_id;\n\n    this.getReserve();\n    this.getAllRange();\n    this.getGuns();\n  },\n\n  methods: {\n    async filterReserveItemsByTime(reserveItems, shootingRange, time) {\n      return new Promise((resolve, reject) => {\n        try {\n          const filteredReservations = reserveItems.filter((t, i) => {\n            return (\n              t.shootingRange.s_id === shootingRange.s_id &&\n              t.r_time_reserve === time\n            );\n          });\n\n          resolve(filteredReservations);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    async getAllRange() {\n      try {\n        const response = await this.axios.get(\n          // Note the use of this.$axios\n          process.env.VUE_APP_API_SERVER + `/shootingranges`\n        );\n        if (response.status === 200) {\n          this.rangeItems = response.data;\n          this.roomData = await Promise.all(\n            this.rangeItems.map(async (item, index) => {\n              const time_01 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"10:00 - 11:00\"\n              );\n              const time_02 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"11:00 - 12:00\"\n              );\n              const time_03 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"12:00 - 13:00\"\n              );\n              const time_04 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"13:00 - 14:00\"\n              );\n              const time_05 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"14:00 - 15:00\"\n              );\n              const time_06 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"15:00 - 16:00\"\n              );\n              const time_07 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"16:00 - 17:00\"\n              );\n              const time_08 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"17:00 - 18:00\"\n              );\n              const time_09 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"18:00 - 19:00\"\n              );\n              const time_10 = await this.filterReserveItemsByTime(\n                this.reserveItems,\n                item,\n                \"19:00 - 20:00\"\n              );\n              // Add similar lines for other time slots\n\n              return {\n                range: item.s_name,\n                range_id: item.s_id,\n                time_01: time_01.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_02: time_02.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_03: time_03.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_04: time_04.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_05: time_05.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_06: time_06.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_07: time_07.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_08: time_08.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_09: time_09.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                time_10: time_10.length > 0 ? \"ไม่ว่าง\" : \"ว่าง\",\n                timeD_01: \"10:00 - 11:00\",\n                timeD_02: \"11:00 - 12:00\",\n                timeD_03: \"12:00 - 13:00\",\n                timeD_04: \"13:00 - 14:00\",\n                timeD_05: \"14:00 - 15:00\",\n                timeD_06: \"15:00 - 16:00\",\n                timeD_07: \"16:00 - 17:00\",\n                timeD_08: \"17:00 - 18:00\",\n                timeD_09: \"18:00 - 19:00\",\n                timeD_10: \"19:00 - 20:00\",\n              };\n            })\n          );\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n\n    getColor(value) {\n      return value === \"ว่าง\" ? \"green\" : \"red\";\n    },\n    async getReserve() {\n      try {\n        const response = await this.axios.get(\n          process.env.VUE_APP_API_SERVER + \"/reserves\"\n        );\n        if (response.status === 200) {\n          const filteredReservations = await this.filterReservationsByDate(\n            response.data,\n            this.selectedDate\n          );\n          this.reserveItems = filteredReservations;\n        }\n\n        // this.reserveItems = data;\n        // console.log(\"reserveItems\", this.reserveItems);\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    filterReservationsByDate(data, selectedDate) {\n      return new Promise((resolve, reject) => {\n        try {\n          const filteredReservations = data.filter((item) => {\n            return item.r_date_reserve === selectedDate;\n          });\n\n          resolve(filteredReservations);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    async getGuns() {\n      try {\n        const response = await this.axios.get(\n          process.env.VUE_APP_API_SERVER + \"/guns\"\n        );\n        if (response.status === 200) {\n          this.gunItems = response.data;\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async reserveRange() {\n      try {\n        // this.dataReserve.guns = this.selectGuns.map((item) => ({ g_id: item }));\n        this.dataReserve.guns = this.selectGuns;\n\n        // console.log(\"save\", this.dataReserve);\n\n        const response = await this.axios.post(\n          process.env.VUE_APP_API_SERVER + \"/reserve\",\n          { ...this.dataReserve }\n        );\n        if (response.status === 201) {\n          this.dialogOpen = false;\n          Swal.fire({\n            title: \"จองสนามสำเร็จ!\",\n            // text: \"คุณสมัครสมาชิกสำเร็จ\",\n            icon: \"success\",\n            confirmButtonText: \"ตกลง\",\n            // timer: 1000,\n          }).then(() => {\n            window.location.href = \"/reservedata\";\n          });\n        }\n      } catch (err) {\n        Swal.fire({\n          title: \"เกิดข้อผิดพลาด!\",\n          // text: \"คุณสมัครสมาชิกสำเร็จ\",\n          icon: \"error\",\n          confirmButtonText: \"ตกลง\",\n          timer: 1500,\n        });\n        console.error(err);\n      }\n    },\n    async openDialogCard(s_id, s_name, r_time_reserve) {\n      if (this.isAdmin) return;\n      if (await this.getDetail()) return;\n      this.dataReserve = {\n        range: s_name,\n        r_date_reserve: this.selectedDate,\n        r_time_reserve: r_time_reserve,\n        customer: {\n          c_id: this.c_id,\n        },\n        shootingRange: {\n          s_id: s_id,\n        },\n        guns: [],\n      };\n      this.dialogOpen = true;\n      // console.log(this.dataReserve);\n    },\n    closeDialogCard() {\n      // Reset the editedUser and close the dialog\n      this.dataReserve = {};\n      this.dataReserve.guns = [];\n      this.dialogOpen = false;\n    },\n    async getDetail() {\n      try {\n        const response = await this.axios.get(\n          process.env.VUE_APP_API_SERVER + `/reserves`\n        );\n        if (response.status === 200) {\n          this.items = response.data.filter(\n            (item) => item.customer.c_id === this.c_id\n          );\n          console.log(\"this.items\", this.items);\n          if (this.items.length > 0) {\n            Swal.fire({\n              title: \"คุณมีสนามที่จองอยู่แล้ว!\",\n              text: \"คุณสามารถจองได้ 1 สนามต่อครั้ง\",\n              icon: \"warning\",\n              confirmButtonText: \"ดูข้อมูล\",\n              showCancelButton: true,\n              cancelButtonText: \"ปิด\",\n              // timer: 1000,\n            }).then((result) => {\n              if (result.isConfirmed) {\n                window.location.href = \"/reservedata\";\n              }\n            });\n            return true;\n          } else if (this.items.length === 0) {\n            return false;\n          }\n        }\n      } catch (error) {\n        console.error(\"Registration error:\", error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.text-left {\n  width: 300px;\n  font-size: 12px;\n  text-align: center;\n}\n\ntd {\n  padding-top: 10px;\n}\n.select:hover {\n  color: var(--color-main);\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}