{"ast":null,"code":"import Swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      gunItems: [],\n      editGun: {},\n      editDialog: false,\n      headers: [{\n        text: \"#\",\n        align: \"center\",\n        sortable: false,\n        value: \"index\"\n      }, {\n        text: \"ชื่อปืน\",\n        align: \"start\",\n        sortable: false,\n        value: \"g_name\"\n      }, {\n        text: \"Actions\",\n        align: \"center\",\n        value: \"actions\",\n        sortable: false\n      }]\n    };\n  },\n  created() {\n    this.getAllGun();\n  },\n  computed: {\n    indexedGunItems() {\n      return this.gunItems.map((item, index) => {\n        return {\n          ...item,\n          index: index + 1\n        };\n      });\n    }\n  },\n  methods: {\n    async getAllGun() {\n      try {\n        const response = await this.axios.get(process.env.VUE_APP_API_SERVER + `/guns`);\n        if (response.status == 200) {\n          this.gunItems = response.data;\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async deleteItem(gun) {\n      Swal.fire({\n        title: \"แจ้งเตือน!\",\n        text: `คุณต้องการลบปืน ${gun.g_name}?`,\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"ตกลง\",\n        cancelButtonText: \"ยกเลิก\"\n      }).then(async result => {\n        if (result.isConfirmed) {\n          try {\n            const response = await this.axios.delete(process.env.VUE_APP_API_SERVER + `/gun/${gun.g_id}`);\n            if (response.status === 200) {\n              Swal.fire({\n                title: \"ลบปืนสำเร็จ!\",\n                // text: \"คุณสมัครสมาชิกสำเร็จ\",\n                icon: \"success\",\n                confirmButtonText: \"ตกลง\",\n                timer: 1500\n              });\n              this.getAllGun();\n            }\n          } catch (err) {\n            Swal.fire({\n              title: \"เกิดข้อผิดพลาด!\",\n              // text: \"คุณสมัครสมาชิกสำเร็จ\",\n              icon: \"error\",\n              confirmButtonText: \"ตกลง\",\n              timer: 1500\n            });\n            console.error(err);\n          }\n        }\n      });\n    },\n    editUser(item) {\n      this.editGun = {\n        ...item\n      };\n      this.editDialog = true;\n    },\n    async saveUserChanges(gunId) {\n      let gunData = {\n        g_name: this.editGun.g_name\n      };\n      try {\n        const response = await this.axios.put(process.env.VUE_APP_API_SERVER + `/gun/${gunId}`, gunData);\n        if (response.status === 200) {\n          Swal.fire({\n            title: \"แก้ไขข้อมูลปืนสำเร็จ!\",\n            // text: \"คุณสมัครสมาชิกสำเร็จ\",\n            icon: \"success\",\n            confirmButtonText: \"ตกลง\",\n            timer: 1000\n          });\n          this.getAllGun();\n        }\n        this.editDialog = false;\n      } catch (error) {\n        Swal.fire({\n          title: \"เกิดข้อผิดพลาด!\",\n          // text: \"คุณสมัครสมาชิกสำเร็จ\",\n          icon: \"error\",\n          confirmButtonText: \"ตกลง\",\n          timer: 1500\n        });\n        console.error(\"error:\", error);\n      }\n    },\n    cancelEdit() {\n      // Reset the editGun and close the dialog\n      this.editGun = {};\n      this.editDialog = false;\n    }\n  }\n};","map":{"version":3,"names":["Swal","data","gunItems","editGun","editDialog","headers","text","align","sortable","value","created","getAllGun","computed","indexedGunItems","map","item","index","methods","response","axios","get","process","env","VUE_APP_API_SERVER","status","err","console","error","deleteItem","gun","fire","title","g_name","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","delete","g_id","timer","editUser","saveUserChanges","gunId","gunData","put","cancelEdit"],"sources":["src/views/GunListView.vue"],"sourcesContent":["<template>\n    <v-container style=\"padding-top: 50px; padding-bottom: 60px\">\n    <v-btn text @click=\"$router.go(-1)\" style=\"margin-bottom: 20px\">\n      <v-icon left>mdi-arrow-left</v-icon> ย้อนกลับ\n    </v-btn>\n    <h2>รายชื่อปืน</h2>\n    <v-row>\n      <v-col\n        style=\"display: flex; justify-content: flex-end; margin-bottom: 20px\"\n      >\n        <v-btn color=\"var(--color-main)\" to=\"/gun/add\">เพิ่มปืน</v-btn>\n      </v-col>\n    </v-row>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"indexedGunItems\"\n      class=\"elevation-1\"\n    >\n      <template v-slot:[`item.actions`]=\"{ item }\">\n        <v-icon small class=\"mr-2\" @click=\"editUser(item)\"> mdi-pencil </v-icon>\n        <v-icon small @click=\"deleteItem(item)\"> mdi-delete </v-icon>\n      </template>\n    </v-data-table>\n\n    <v-dialog v-model=\"editDialog\" max-width=\"600px\">\n      <v-card>\n        <v-card-title>แก้ไขข้อมูล</v-card-title>\n        <v-card-text>\n          <!-- Your user edit form here -->\n          <v-text-field\n            v-model=\"editGun.g_name\"\n            label=\"ชื่อปืน\"\n          ></v-text-field>\n\n          <div\n            style=\"\n              display: flex;\n              justify-content: flex-end;\n              align-items: center;\n              margin-top: 10px;\n            \"\n          >\n            <v-btn color=\"primary\" @click=\"saveUserChanges(editGun.g_id)\"\n              >บันทึก</v-btn\n            >\n            <v-btn style=\"margin-left: 10px\" @click=\"cancelEdit\">ยกเลิก</v-btn>\n          </div>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport Swal from \"sweetalert2\";\n\nexport default {\n  data() {\n    return {\n      gunItems: [],\n      editGun: {},\n      editDialog: false,\n      headers: [\n        {\n          text: \"#\",\n          align: \"center\",\n          sortable: false,\n          value: \"index\",\n        },\n        {\n          text: \"ชื่อปืน\",\n          align: \"start\",\n          sortable: false,\n          value: \"g_name\",\n        },\n        { text: \"Actions\", align: \"center\", value: \"actions\", sortable: false },\n      ],\n    };\n  },\n\n  created() {\n    this.getAllGun();\n  },\n\n  computed: {\n    indexedGunItems() {\n      return this.gunItems.map((item, index) => {\n        return { ...item, index: index + 1, };\n      });\n    },\n  },\n\n  methods: {\n    async getAllGun() {\n      try {\n        const response = await this.axios.get(\n          process.env.VUE_APP_API_SERVER + `/guns`\n        );\n        if (response.status == 200) {\n          this.gunItems = response.data;\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async deleteItem(gun) {\n      Swal.fire({\n        title: \"แจ้งเตือน!\",\n        text: `คุณต้องการลบปืน ${gun.g_name}?`,\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"ตกลง\",\n        cancelButtonText: \"ยกเลิก\",\n      }).then(async (result) => {\n        if (result.isConfirmed) {\n          try {\n            const response = await this.axios.delete(\n              process.env.VUE_APP_API_SERVER + `/gun/${gun.g_id}`\n            );\n            if (response.status === 200) {\n              Swal.fire({\n                title: \"ลบปืนสำเร็จ!\",\n                // text: \"คุณสมัครสมาชิกสำเร็จ\",\n                icon: \"success\",\n                confirmButtonText: \"ตกลง\",\n                timer: 1500,\n              });\n              this.getAllGun();\n            }\n          } catch (err) {\n            Swal.fire({\n              title: \"เกิดข้อผิดพลาด!\",\n              // text: \"คุณสมัครสมาชิกสำเร็จ\",\n              icon: \"error\",\n              confirmButtonText: \"ตกลง\",\n              timer: 1500,\n            });\n            console.error(err);\n          }\n        }\n      });\n    },\n\n    editUser(item) {\n      this.editGun = { ...item };\n      this.editDialog = true;\n    },\n\n    async saveUserChanges(gunId) {\n      let gunData = { g_name: this.editGun.g_name };\n\n      try {\n        const response = await this.axios.put(\n          process.env.VUE_APP_API_SERVER + `/gun/${gunId}`,\n          gunData\n        );\n        if (response.status === 200) {\n          Swal.fire({\n            title: \"แก้ไขข้อมูลปืนสำเร็จ!\",\n            // text: \"คุณสมัครสมาชิกสำเร็จ\",\n            icon: \"success\",\n            confirmButtonText: \"ตกลง\",\n            timer: 1000,\n          });\n          this.getAllGun();\n        }\n\n       \n        this.editDialog = false;\n      } catch (error) {\n        Swal.fire({\n          title: \"เกิดข้อผิดพลาด!\",\n          // text: \"คุณสมัครสมาชิกสำเร็จ\",\n          icon: \"error\",\n          confirmButtonText: \"ตกลง\",\n          timer: 1500,\n        });\n\n        console.error(\"error:\", error);\n      }\n    },\n    cancelEdit() {\n      // Reset the editGun and close the dialog\n      this.editGun = {};\n      this.editDialog = false;\n    },\n  },\n};\n</script>\n"],"mappings":"AAsDA,OAAAA,IAAA;AAEA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,OAAA;MACAC,UAAA;MACAC,OAAA,GACA;QACAC,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QAAAH,IAAA;QAAAC,KAAA;QAAAE,KAAA;QAAAD,QAAA;MAAA;IAEA;EACA;EAEAE,QAAA;IACA,KAAAC,SAAA;EACA;EAEAC,QAAA;IACAC,gBAAA;MACA,YAAAX,QAAA,CAAAY,GAAA,EAAAC,IAAA,EAAAC,KAAA;QACA;UAAA,GAAAD,IAAA;UAAAC,KAAA,EAAAA,KAAA;QAAA;MACA;IACA;EACA;EAEAC,OAAA;IACA,MAAAN,UAAA;MACA;QACA,MAAAO,QAAA,cAAAC,KAAA,CAAAC,GAAA,CACAC,OAAA,CAAAC,GAAA,CAAAC,kBAAA,UACA;QACA,IAAAL,QAAA,CAAAM,MAAA;UACA,KAAAtB,QAAA,GAAAgB,QAAA,CAAAjB,IAAA;QACA;MACA,SAAAwB,GAAA;QACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;MACA;IACA;IACA,MAAAG,WAAAC,GAAA;MACA7B,IAAA,CAAA8B,IAAA;QACAC,KAAA;QACAzB,IAAA,qBAAAuB,GAAA,CAAAG,MAAA;QACAC,IAAA;QACAC,gBAAA;QACAC,iBAAA;QACAC,gBAAA;MACA,GAAAC,IAAA,OAAAC,MAAA;QACA,IAAAA,MAAA,CAAAC,WAAA;UACA;YACA,MAAArB,QAAA,cAAAC,KAAA,CAAAqB,MAAA,CACAnB,OAAA,CAAAC,GAAA,CAAAC,kBAAA,WAAAM,GAAA,CAAAY,IAAA,EACA;YACA,IAAAvB,QAAA,CAAAM,MAAA;cACAxB,IAAA,CAAA8B,IAAA;gBACAC,KAAA;gBACA;gBACAE,IAAA;gBACAE,iBAAA;gBACAO,KAAA;cACA;cACA,KAAA/B,SAAA;YACA;UACA,SAAAc,GAAA;YACAzB,IAAA,CAAA8B,IAAA;cACAC,KAAA;cACA;cACAE,IAAA;cACAE,iBAAA;cACAO,KAAA;YACA;YACAhB,OAAA,CAAAC,KAAA,CAAAF,GAAA;UACA;QACA;MACA;IACA;IAEAkB,SAAA5B,IAAA;MACA,KAAAZ,OAAA;QAAA,GAAAY;MAAA;MACA,KAAAX,UAAA;IACA;IAEA,MAAAwC,gBAAAC,KAAA;MACA,IAAAC,OAAA;QAAAd,MAAA,OAAA7B,OAAA,CAAA6B;MAAA;MAEA;QACA,MAAAd,QAAA,cAAAC,KAAA,CAAA4B,GAAA,CACA1B,OAAA,CAAAC,GAAA,CAAAC,kBAAA,WAAAsB,KAAA,IACAC,OACA;QACA,IAAA5B,QAAA,CAAAM,MAAA;UACAxB,IAAA,CAAA8B,IAAA;YACAC,KAAA;YACA;YACAE,IAAA;YACAE,iBAAA;YACAO,KAAA;UACA;UACA,KAAA/B,SAAA;QACA;QAGA,KAAAP,UAAA;MACA,SAAAuB,KAAA;QACA3B,IAAA,CAAA8B,IAAA;UACAC,KAAA;UACA;UACAE,IAAA;UACAE,iBAAA;UACAO,KAAA;QACA;QAEAhB,OAAA,CAAAC,KAAA,WAAAA,KAAA;MACA;IACA;IACAqB,WAAA;MACA;MACA,KAAA7C,OAAA;MACA,KAAAC,UAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}