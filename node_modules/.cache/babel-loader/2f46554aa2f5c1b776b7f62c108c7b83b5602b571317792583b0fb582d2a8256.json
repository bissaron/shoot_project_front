{"ast":null,"code":"import Swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      gunItems: [],\n      editGun: {},\n      editDialog: false,\n      headers: [{\n        text: \"#\",\n        align: \"center\",\n        sortable: false,\n        value: \"index\"\n      }, {\n        text: \"สนาม\",\n        align: \"start\",\n        sortable: true,\n        value: \"shootingRange.s_name\"\n      }, {\n        text: \"วันที่จอง\",\n        align: \"start\",\n        sortable: true,\n        value: \"r_date_reserve\"\n      }, {\n        text: \"เวลาที่จอง\",\n        align: \"start\",\n        sortable: true,\n        value: \"r_time_reserve\"\n      }, {\n        text: \"ชื่อจริง\",\n        align: \"start\",\n        sortable: true,\n        value: \"customer.c_fname\"\n      }, {\n        text: \"นามสกุล\",\n        align: \"start\",\n        sortable: true,\n        value: \"customer.c_lname\"\n      }, {\n        text: \"เบอร์มือถือ\",\n        align: \"start\",\n        sortable: false,\n        value: \"customer.c_tel\"\n      }, {\n        text: \"Actions\",\n        align: \"center\",\n        value: \"actions\",\n        sortable: false\n      }]\n    };\n  },\n  created() {\n    this.getAllGun();\n  },\n  computed: {\n    indexedGunItems() {\n      return this.gunItems.map((item, index) => {\n        return {\n          ...item,\n          index: index + 1\n        };\n      });\n    }\n  },\n  methods: {\n    async getAllGun() {\n      try {\n        const response = await this.axios.get(process.env.VUE_APP_API_SERVER + `/reserves`);\n        if (response.status == 200) {\n          this.gunItems = response.data;\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async deleteItem(Rid) {\n      Swal.fire({\n        title: \"แจ้งเตือน!\",\n        text: `คุณต้องการลบการจอง?`,\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"ตกลง\",\n        cancelButtonText: \"ยกเลิก\"\n      }).then(async result => {\n        if (result.isConfirmed) {\n          try {\n            const response = await this.axios.delete(process.env.VUE_APP_API_SERVER + `/reserve/${Rid}`);\n            if (response.status === 200) {\n              Swal.fire({\n                title: \"ลบกาารจองสำเร็จ!\",\n                // text: \"คุณสมัครสมาชิกสำเร็จ\",\n                icon: \"success\",\n                confirmButtonText: \"ตกลง\",\n                timer: 1500\n              });\n              this.getAllGun();\n            }\n          } catch (err) {\n            Swal.fire({\n              title: \"เกิดข้อผิดพลาด!\",\n              // text: \"คุณสมัครสมาชิกสำเร็จ\",\n              icon: \"error\",\n              confirmButtonText: \"ตกลง\",\n              timer: 1500\n            });\n            console.error(err);\n          }\n        }\n      });\n    },\n    editUser(item) {\n      this.editGun = {\n        ...item\n      };\n      console.log(\"this.editGun\", this.editGun);\n      this.editDialog = true;\n    },\n    async saveUserChanges(gunId) {\n      let gunData = {\n        g_name: this.editGun.g_name\n      };\n      try {\n        const response = await this.axios.put(process.env.VUE_APP_API_SERVER + `/gun/${gunId}`, gunData);\n        if (response.status === 200) {\n          Swal.fire({\n            title: \"แก้ไขข้อมูลปืนสำเร็จ!\",\n            // text: \"คุณสมัครสมาชิกสำเร็จ\",\n            icon: \"success\",\n            confirmButtonText: \"ตกลง\",\n            timer: 1000\n          });\n          this.getAllGun();\n        }\n        this.editDialog = false;\n      } catch (error) {\n        Swal.fire({\n          title: \"เกิดข้อผิดพลาด!\",\n          // text: \"คุณสมัครสมาชิกสำเร็จ\",\n          icon: \"error\",\n          confirmButtonText: \"ตกลง\",\n          timer: 1500\n        });\n        console.error(\"error:\", error);\n      }\n    },\n    cancelEdit() {\n      // Reset the editGun and close the dialog\n      this.editGun = {};\n      this.editDialog = false;\n    }\n  }\n};","map":{"version":3,"names":["Swal","data","gunItems","editGun","editDialog","headers","text","align","sortable","value","created","getAllGun","computed","indexedGunItems","map","item","index","methods","response","axios","get","process","env","VUE_APP_API_SERVER","status","err","console","error","deleteItem","Rid","fire","title","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","delete","timer","editUser","log","saveUserChanges","gunId","gunData","g_name","put","cancelEdit"],"sources":["src/views/ReserveListView.vue"],"sourcesContent":["<template>\n  <v-container style=\"padding-top: 50px; padding-bottom: 60px\">\n    <v-btn text @click=\"$router.go(-1)\" style=\"margin-bottom: 20px\">\n      <v-icon left>mdi-arrow-left</v-icon> ย้อนกลับ\n    </v-btn>\n    <h2>รายการการจองสนาม</h2>\n    <v-row>\n      <v-col\n        style=\"display: flex; justify-content: flex-end; margin-bottom: 20px\"\n      >\n        <!-- <v-btn color=\"var(--color-main)\" to=\"/gun/add\">เพิ่มปืน</v-btn> -->\n      </v-col>\n    </v-row>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"indexedGunItems\"\n      class=\"elevation-1\"\n    >\n      <template v-slot:[`item.actions`]=\"{ item }\">\n        <v-icon small class=\"mr-2\" @click=\"editUser(item)\"> mdi-eye </v-icon>\n        <v-icon small @click=\"deleteItem(item.r_id)\"> mdi-delete </v-icon>\n      </template>\n    </v-data-table>\n\n    <v-dialog v-model=\"editDialog\" max-width=\"600px\" style=\"height: 100%\">\n      <v-card class=\"card\">\n        <v-card-title><h4>รายละเอียด</h4></v-card-title>\n        <v-card-text\n          ><strong>สนามที่จอง:</strong>\n          {{ editGun?.shootingRange?.s_name }}</v-card-text\n        >\n        <v-card-text\n          ><strong>วันที่จอง:</strong>\n          {{ editGun?.r_date_reserve }}</v-card-text\n        >\n        <v-card-text\n          ><strong>เวลาที่จอง:</strong>\n          {{ editGun?.r_time_reserve }}</v-card-text\n        >\n        <v-card-text><strong>ปืน:</strong></v-card-text>\n        <v-card-text\n          v-for=\"gun in editGun?.guns\"\n          :key=\"gun.g_id\"\n          style=\"display: inline\"\n          >{{ gun }},</v-card-text\n        >\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport Swal from \"sweetalert2\";\n\nexport default {\n  data() {\n    return {\n      gunItems: [],\n      editGun: {},\n      editDialog: false,\n      headers: [\n        {\n          text: \"#\",\n          align: \"center\",\n          sortable: false,\n          value: \"index\",\n        },\n        {\n          text: \"สนาม\",\n          align: \"start\",\n          sortable: true,\n          value: \"shootingRange.s_name\",\n        },\n        {\n          text: \"วันที่จอง\",\n          align: \"start\",\n          sortable: true,\n          value: \"r_date_reserve\",\n        },\n        {\n          text: \"เวลาที่จอง\",\n          align: \"start\",\n          sortable: true,\n          value: \"r_time_reserve\",\n        },\n        {\n          text: \"ชื่อจริง\",\n          align: \"start\",\n          sortable: true,\n          value: \"customer.c_fname\",\n        },\n        {\n          text: \"นามสกุล\",\n          align: \"start\",\n          sortable: true,\n          value: \"customer.c_lname\",\n        },\n        {\n          text: \"เบอร์มือถือ\",\n          align: \"start\",\n          sortable: false,\n          value: \"customer.c_tel\",\n        },\n        { text: \"Actions\", align: \"center\", value: \"actions\", sortable: false },\n      ],\n    };\n  },\n\n  created() {\n    this.getAllGun();\n  },\n\n  computed: {\n    indexedGunItems() {\n      return this.gunItems.map((item, index) => {\n        return { ...item, index: index + 1 };\n      });\n    },\n  },\n\n  methods: {\n    async getAllGun() {\n      try {\n        const response = await this.axios.get(\n          process.env.VUE_APP_API_SERVER + `/reserves`\n        );\n        if (response.status == 200) {\n          this.gunItems = response.data;\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async deleteItem(Rid) {\n      Swal.fire({\n        title: \"แจ้งเตือน!\",\n        text: `คุณต้องการลบการจอง?`,\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"ตกลง\",\n        cancelButtonText: \"ยกเลิก\",\n      }).then(async (result) => {\n        if (result.isConfirmed) {\n          try {\n            const response = await this.axios.delete(\n              process.env.VUE_APP_API_SERVER + `/reserve/${Rid}`\n            );\n            if (response.status === 200) {\n              Swal.fire({\n                title: \"ลบกาารจองสำเร็จ!\",\n                // text: \"คุณสมัครสมาชิกสำเร็จ\",\n                icon: \"success\",\n                confirmButtonText: \"ตกลง\",\n                timer: 1500,\n              });\n              this.getAllGun();\n            }\n          } catch (err) {\n            Swal.fire({\n              title: \"เกิดข้อผิดพลาด!\",\n              // text: \"คุณสมัครสมาชิกสำเร็จ\",\n              icon: \"error\",\n              confirmButtonText: \"ตกลง\",\n              timer: 1500,\n            });\n            console.error(err);\n          }\n        }\n      });\n    },\n\n    editUser(item) {\n      this.editGun = { ...item };\n      console.log(\"this.editGun\", this.editGun);\n      this.editDialog = true;\n    },\n\n    async saveUserChanges(gunId) {\n      let gunData = { g_name: this.editGun.g_name };\n\n      try {\n        const response = await this.axios.put(\n          process.env.VUE_APP_API_SERVER + `/gun/${gunId}`,\n          gunData\n        );\n        if (response.status === 200) {\n          Swal.fire({\n            title: \"แก้ไขข้อมูลปืนสำเร็จ!\",\n            // text: \"คุณสมัครสมาชิกสำเร็จ\",\n            icon: \"success\",\n            confirmButtonText: \"ตกลง\",\n            timer: 1000,\n          });\n          this.getAllGun();\n        }\n\n        this.editDialog = false;\n      } catch (error) {\n        Swal.fire({\n          title: \"เกิดข้อผิดพลาด!\",\n          // text: \"คุณสมัครสมาชิกสำเร็จ\",\n          icon: \"error\",\n          confirmButtonText: \"ตกลง\",\n          timer: 1500,\n        });\n\n        console.error(\"error:\", error);\n      }\n    },\n    cancelEdit() {\n      // Reset the editGun and close the dialog\n      this.editGun = {};\n      this.editDialog = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.card {\n  /* margin: 20px; */\n  padding: 20px;\n  padding-bottom: 30px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #fff;\n  height: 100%;\n}\n</style>\n"],"mappings":"AAoDA,OAAAA,IAAA;AAEA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,OAAA;MACAC,UAAA;MACAC,OAAA,GACA;QACAC,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QACAH,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;MACA,GACA;QAAAH,IAAA;QAAAC,KAAA;QAAAE,KAAA;QAAAD,QAAA;MAAA;IAEA;EACA;EAEAE,QAAA;IACA,KAAAC,SAAA;EACA;EAEAC,QAAA;IACAC,gBAAA;MACA,YAAAX,QAAA,CAAAY,GAAA,EAAAC,IAAA,EAAAC,KAAA;QACA;UAAA,GAAAD,IAAA;UAAAC,KAAA,EAAAA,KAAA;QAAA;MACA;IACA;EACA;EAEAC,OAAA;IACA,MAAAN,UAAA;MACA;QACA,MAAAO,QAAA,cAAAC,KAAA,CAAAC,GAAA,CACAC,OAAA,CAAAC,GAAA,CAAAC,kBAAA,cACA;QACA,IAAAL,QAAA,CAAAM,MAAA;UACA,KAAAtB,QAAA,GAAAgB,QAAA,CAAAjB,IAAA;QACA;MACA,SAAAwB,GAAA;QACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;MACA;IACA;IACA,MAAAG,WAAAC,GAAA;MACA7B,IAAA,CAAA8B,IAAA;QACAC,KAAA;QACAzB,IAAA;QACA0B,IAAA;QACAC,gBAAA;QACAC,iBAAA;QACAC,gBAAA;MACA,GAAAC,IAAA,OAAAC,MAAA;QACA,IAAAA,MAAA,CAAAC,WAAA;UACA;YACA,MAAApB,QAAA,cAAAC,KAAA,CAAAoB,MAAA,CACAlB,OAAA,CAAAC,GAAA,CAAAC,kBAAA,eAAAM,GAAA,EACA;YACA,IAAAX,QAAA,CAAAM,MAAA;cACAxB,IAAA,CAAA8B,IAAA;gBACAC,KAAA;gBACA;gBACAC,IAAA;gBACAE,iBAAA;gBACAM,KAAA;cACA;cACA,KAAA7B,SAAA;YACA;UACA,SAAAc,GAAA;YACAzB,IAAA,CAAA8B,IAAA;cACAC,KAAA;cACA;cACAC,IAAA;cACAE,iBAAA;cACAM,KAAA;YACA;YACAd,OAAA,CAAAC,KAAA,CAAAF,GAAA;UACA;QACA;MACA;IACA;IAEAgB,SAAA1B,IAAA;MACA,KAAAZ,OAAA;QAAA,GAAAY;MAAA;MACAW,OAAA,CAAAgB,GAAA,sBAAAvC,OAAA;MACA,KAAAC,UAAA;IACA;IAEA,MAAAuC,gBAAAC,KAAA;MACA,IAAAC,OAAA;QAAAC,MAAA,OAAA3C,OAAA,CAAA2C;MAAA;MAEA;QACA,MAAA5B,QAAA,cAAAC,KAAA,CAAA4B,GAAA,CACA1B,OAAA,CAAAC,GAAA,CAAAC,kBAAA,WAAAqB,KAAA,IACAC,OACA;QACA,IAAA3B,QAAA,CAAAM,MAAA;UACAxB,IAAA,CAAA8B,IAAA;YACAC,KAAA;YACA;YACAC,IAAA;YACAE,iBAAA;YACAM,KAAA;UACA;UACA,KAAA7B,SAAA;QACA;QAEA,KAAAP,UAAA;MACA,SAAAuB,KAAA;QACA3B,IAAA,CAAA8B,IAAA;UACAC,KAAA;UACA;UACAC,IAAA;UACAE,iBAAA;UACAM,KAAA;QACA;QAEAd,OAAA,CAAAC,KAAA,WAAAA,KAAA;MACA;IACA;IACAqB,WAAA;MACA;MACA,KAAA7C,OAAA;MACA,KAAAC,UAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}