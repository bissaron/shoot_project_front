{"ast":null,"code":"export default {\n  name: \"NavBar\",\n  data: () => ({\n    auth: null,\n    isAuth: false,\n    isAdmin: false,\n    showMenu: false,\n    user: {\n      initials: \"\",\n      role: \"\",\n      username: \"\",\n      fullname: \"\",\n      phone: \"\"\n    }\n  }),\n  // computed: {\n  //   user() {\n  //     // You should replace this with actual user data if available\n  //     return { initials: this.auth?.user?.username };\n  //   },\n  // },\n  created() {\n    this.auth = JSON.parse(localStorage.getItem(\"auth\"));\n    this.isAuth = this.auth !== null;\n    this.isAdmin = this.auth.user.role === \"admin\";\n    this.user.initials = \"PP\";\n    this.user.username = this.auth.user.username;\n    this.user.phone = this.auth.c_tel || null;\n    this.getFullName();\n  },\n  methods: {\n    async logout() {\n      try {\n        localStorage.clear(\"auth\");\n        window.location.href = \"/\";\n      } catch (error) {\n        // Handle the error, e.g., show an error message\n        console.error(\"logout error:\", error);\n        // You can display an error message to the user here\n      }\n    },\n\n    getFullName() {\n      try {\n        if (this.auth) {\n          if (this.auth.user.role === \"customer\") {\n            this.user.fullname = this.auth.c_fname + \" \" + this.auth.c_lname;\n            this.user.role = \"ลูกค้า\";\n          } else if (this.auth.user.role === \"admin\") {\n            this.user.fullname = this.auth.a_fname + \" \" + this.auth.a_lname;\n            this.user.role = \"เจ้าของ\";\n          }\n        }\n      } catch (error) {\n        console.error(\"Error in getFullName:\", error);\n        // Handle the error, e.g., set a default value for fullname\n        this.fullname = \"Unknown\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","auth","isAuth","isAdmin","showMenu","user","initials","role","username","fullname","phone","created","JSON","parse","localStorage","getItem","c_tel","getFullName","methods","logout","clear","window","location","href","error","console","c_fname","c_lname","a_fname","a_lname"],"sources":["src/components/NavBar.vue"],"sourcesContent":["<template>\n  <v-app-bar app color=\"primary\" dark>\n    <div\n      class=\"d-flex align-center\"\n      style=\"flex: 1; justify-content: flex-start\"\n    >\n      <div\n        style=\"\n          background-color: rgba(0, 60, 113, 1);;\n          border-radius: 100px;\n          width: 40px;\n          height: 40px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          padding-left: 5px;\n          margin-right: 10px;\n        \"\n      >\n        <v-img\n          alt=\"Vuetify Logo\"\n          class=\"shrink mr-2\"\n          contain\n          src=\"../assets/logo.png\"\n          transition=\"scale-transition\"\n          width=\"40\"\n        />\n      </div>\n      <div\n        class=\"shrink mt-1 hidden-sm-and-down\"\n        style=\"color: var(--color-main); font-weight: bold\"\n        contain\n        min-width=\"100\"\n        width=\"100\"\n      >\n        <h3>PSU Shooting Club</h3>\n      </div>\n    </div>\n\n    <div\n      style=\"\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        align-items: center;\n        flex: 1;\n      \"\n    >\n      <router-link to=\"/\" style=\"margin-right: 25px\">\n        <span :class=\"{ active: $route.path === '/' }\">หน้าแรก</span>\n      </router-link>\n\n      <v-btn to=\"/login\" v-if=\"!isAuth\">\n        <span :class=\"{ active: $route.path === '/login' }\">เข้าสู่ระบบ</span>\n      </v-btn>\n    </div>\n    <template v-if=\"isAuth\">\n      <v-menu min-width=\"200px\" rounded v-model=\"showMenu\">\n        <template v-slot:activator=\"{ props }\">\n          <v-btn v-bind=\"props\" @click=\"showMenu = !showMenu\">\n            <!-- <v-avatar color=\"var(--color-main)\" size=\"40px\" style=\"margin-right: 20px;\">\n              <v-icon color=\"var(--color-black)\" dark\n                >mdi-account-circle</v-icon\n              >\n            </v-avatar> -->\n            {{ user.username }}\n          </v-btn>\n        </template>\n        <v-card>\n          <v-card-text>\n            <div class=\"mx-auto text-center\">\n              <v-avatar color=\"var(--color-main)\">\n                <v-icon color=\"var(--color-black)\" dark\n                  >mdi-account-circle</v-icon\n                >\n              </v-avatar>\n              <p>{{ user.role }}</p>\n              <h3>{{ user.username }}</h3>\n              <h5>{{ user.fullname }}</h5>\n              <span>{{ user.phone }}</span>\n              <v-divider class=\"my-3\" v-if=\"isAdmin\"></v-divider>\n              <v-btn variant=\"text\" v-if=\"isAdmin\" to=\"/admin\">จัดการระบบ</v-btn>\n              <v-divider class=\"my-3\" v-if=\"!isAdmin\"></v-divider>\n              <v-btn variant=\"text\" to=\"/reservedata\" v-if=\"!isAdmin\">ข้อมูลการจอง</v-btn>\n              <v-divider class=\"my-3\"></v-divider>\n              <v-btn variant=\"text\" @click=\"logout()\"> ออกจากระบบ </v-btn>\n            </div>\n          </v-card-text>\n        </v-card>\n      </v-menu>\n    </template>\n  </v-app-bar>\n</template>\n\n<script>\nexport default {\n  name: \"NavBar\",\n  data: () => ({\n    auth: null,\n    isAuth: false,\n    isAdmin: false,\n    showMenu: false,\n    user: {\n      initials: \"\",\n      role: \"\",\n      username: \"\",\n      fullname: \"\",\n      phone: \"\",\n    },\n  }),\n  // computed: {\n  //   user() {\n  //     // You should replace this with actual user data if available\n  //     return { initials: this.auth?.user?.username };\n  //   },\n  // },\n  created() {\n    this.auth = JSON.parse(localStorage.getItem(\"auth\"));\n    this.isAuth = this.auth !== null;\n    this.isAdmin = this.auth.user.role === \"admin\";\n    this.user.initials = \"PP\";\n    this.user.username = this.auth.user.username;\n    this.user.phone = this.auth.c_tel || null;\n    this.getFullName();\n  },\n  methods: {\n    async logout() {\n      try {\n        localStorage.clear(\"auth\");\n        window.location.href = \"/\";\n      } catch (error) {\n        // Handle the error, e.g., show an error message\n        console.error(\"logout error:\", error);\n        // You can display an error message to the user here\n      }\n    },\n\n    getFullName() {\n      try {\n        if (this.auth) {\n          if (this.auth.user.role === \"customer\") {\n            this.user.fullname = this.auth.c_fname + \" \" + this.auth.c_lname;\n            this.user.role = \"ลูกค้า\";\n          } else if (this.auth.user.role === \"admin\") {\n            this.user.fullname = this.auth.a_fname + \" \" + this.auth.a_lname;\n            this.user.role = \"เจ้าของ\";\n          }\n        }\n      } catch (error) {\n        console.error(\"Error in getFullName:\", error);\n        // Handle the error, e.g., set a default value for fullname\n        this.fullname = \"Unknown\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n\na span {\n  text-decoration: none;\n  color: var(--color-white);\n}\n\n.active {\n  color: var(--color-main);\n}\n</style>\n"],"mappings":"AA+FA;EACAA,IAAA;EACAC,IAAA,EAAAA,CAAA;IACAC,IAAA;IACAC,MAAA;IACAC,OAAA;IACAC,QAAA;IACAC,IAAA;MACAC,QAAA;MACAC,IAAA;MACAC,QAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC,QAAA;IACA,KAAAV,IAAA,GAAAW,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA,KAAAb,MAAA,QAAAD,IAAA;IACA,KAAAE,OAAA,QAAAF,IAAA,CAAAI,IAAA,CAAAE,IAAA;IACA,KAAAF,IAAA,CAAAC,QAAA;IACA,KAAAD,IAAA,CAAAG,QAAA,QAAAP,IAAA,CAAAI,IAAA,CAAAG,QAAA;IACA,KAAAH,IAAA,CAAAK,KAAA,QAAAT,IAAA,CAAAe,KAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA,MAAAC,OAAA;MACA;QACAL,YAAA,CAAAM,KAAA;QACAC,MAAA,CAAAC,QAAA,CAAAC,IAAA;MACA,SAAAC,KAAA;QACA;QACAC,OAAA,CAAAD,KAAA,kBAAAA,KAAA;QACA;MACA;IACA;;IAEAP,YAAA;MACA;QACA,SAAAhB,IAAA;UACA,SAAAA,IAAA,CAAAI,IAAA,CAAAE,IAAA;YACA,KAAAF,IAAA,CAAAI,QAAA,QAAAR,IAAA,CAAAyB,OAAA,cAAAzB,IAAA,CAAA0B,OAAA;YACA,KAAAtB,IAAA,CAAAE,IAAA;UACA,gBAAAN,IAAA,CAAAI,IAAA,CAAAE,IAAA;YACA,KAAAF,IAAA,CAAAI,QAAA,QAAAR,IAAA,CAAA2B,OAAA,cAAA3B,IAAA,CAAA4B,OAAA;YACA,KAAAxB,IAAA,CAAAE,IAAA;UACA;QACA;MACA,SAAAiB,KAAA;QACAC,OAAA,CAAAD,KAAA,0BAAAA,KAAA;QACA;QACA,KAAAf,QAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}